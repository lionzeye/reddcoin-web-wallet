<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Reddcoin HD Web Wallet</title>

    <!-- styles -->
    <link href="assets/css/style.css" rel="stylesheet" />
    <!-- /styles -->

    <!-- core expose -->
    <script src="deps/bitcore.js"></script>
    <script src="../node_modules/reddcoin-electrum-js/browser/electrum.js"></script>
     <script src="deps/angular.js"></script>

    <script>
      // expose reddcore browser
      var bitcore = require('bitcore');
      // expose electrum browser
      var electrum = require('electrum');
      // setup the angular app
      var browserWallet = angular.module('browserWallet', []);
    </script>
    <!-- /core expose  -->

  </head>
  <body>
    <!-- page -->
    <div id="page" ng-app="browserWallet">
      <!-- header -->
      <header id="header">
        <div class="container">
          <div class="logo">
            <img src="assets/img/Reddcoin-name.png" alt="Reddcoin Browser Wallet" />
          </div>

          <div id="ticker" class="ticker" ng-controller="ticker" ng-show="marketData.info">
            <span ng-show="marketData.loading"></span>
            <ul>
              <li class="ticker__currency">USD <span>{{ marketData.info.price_usd }}</span></li>
              <li class="ticker__currency">BTC <span>{{ marketData.info.price_btc }}</span> </li>
            </ul>
            <ul>
              <li>1hr Change: <span class="{{ setPercentageColor( marketData.info.percent_change_1h ) }}">{{ marketData.info.percent_change_1h }}</span></li>
              <li>24hr change: <span class="{{ setPercentageColor( marketData.info.percent_change_24h ) }}">{{ marketData.info.percent_change_24h }}</span></li>
              <li>7D change: <span class="{{ setPercentageColor( marketData.info.percent_change_7d ) }}">{{ marketData.info.percent_change_7d }}</span></li>
            </ul>
          </div>
        </div>
      </header>
      <!-- /header -->
      <!-- app -->
      <div id="app" ng-controller="addresses">

        <div class="hero" ng-if="showForm">
          <div class="container">
            <div class="row">
              <div class="form col-sm-8 col-sm-offset-2">
                <div class="form__wrap">
                  <h1>Reddcoin HD Browser Wallet</h1>
                  <h3 ng-show="!start.bip39seed">Enter your Mnemonic Phrase to Load Your Wallet</h3>

                  <form auto-fill-fix>
                    <div class="row">
                      <span class="col-sm-7 col-sm-offset-1">
                        <input type="text" ng-model="start.bip39seed" placeholder="Wallet Seed"/>
                      </span>
                      <span class="col-md-3">
                        <input type="password" ng-model="start.password" placeholder="Wallet Password"/>
                      </span>
                    </div>

                    <button ng-click="loadWallet()">Load Wallet</button>
                    <button ng-click="generateSeed()">Generate Seed</button>
                  </form>
                  <div class="form__message"><small>Note: The default seed will load the test wallet being developed with at current.</small></div>
                </div>
              </div><!-- /form -->
            </div>
          </div>
        </div>

        <div class="container" id="theApp">
          <div class="row">

            <div id="addresses" class="col-md-4">
              <h2 ng-if="!showForm" class="heading">Wallet Addresses</h2>
              <div class="address__item" ng-repeat="(address, obj) in addresses track by $index">
                {{ address }} - {{ formatBalance(obj.confirmed) }} RDD <br />
                <button ng-if="formatBalance(obj.confirmed) !== '0.00'" ng-click="showPaymentForm($index)">
                  <span ng-if="paymentFormIndex === $index">Close</span>
                  <span ng-if="paymentFormIndex !== $index">Send Payment</span>
                </button>
                <div class="address__item-send" ng-if="formatBalance(obj.confirmed) !== '0.00' && paymentFormIndex === $index">
                  <h3>Send a Payment</h3>
                  <input type="text" ng-model="payment.sendTo" placeholder="Send to RDD Address">
                  <input type="text" ng-model="payment.amount" placeholder="Amount to Send">
                  <input type="password" ng-model="payment.password" placeholder="Password">
                  <button ng-click="submitPayment( address )">
                    Submit
                  </button>
                </div>
              </div>
            </div><!-- /#addresses -->

            <div id="transactions" class="col-md-8" ng-if="!showForm">
              <h2 class="heading">Wallet Transactions</h2>
              <ul class="transactions">
                <li ng-repeat="transaction in transactions" class="transaction">
                  <span class="transaction__type transaction__type-{{ transaction.type }}">{{ transaction.type }}</span>
                  <a href="https://live.reddcoin.com/tx/{{ transaction.id }}" target="blank">
                    {{ formatBalance( transaction.total ) }} RDD
                    <span ng-if="transaction.type === 'Received'">from</span>
                    <span ng-if="transaction.type === 'Sent'">to</span>
                    {{ transaction.address }}
                  </a>
                </li>
              </ul>
            </div><!-- /#transactions -->
          </div><!-- /.row -->

          <footer>
              &copy; Copyright 2017, <a href="http://reddcoin.com" target="_blank">Reddcoin Team</a>,<a href="http://pixelbin.com" target="_blank">Pixebin</a>
          </footer>
        </div><!-- /.container -->

        <div id="something-loading" ng-show="isLoading">Loading...</div>
      </div><!-- /app -->
    </div><!-- /page -->
  <script type="text/javascript" src="app.js"></script></body>
</html>